---
title: 'Negativas de acesso a informação no governo Federal'
subtite: '2015 até 04/2021'
output:
    github_document:
      toc: true
      toc_depth: 3
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = T,
  comment = "#>",
  message = F,
  warning = F,
  fig.align = "center",
  echo = F
)
```

## Relatório

* Pedidos por tipo de resposta do órgão (decisão) [CLIQUE AQUI](https://transparencia-brasil.github.io/negativas-acesso-informacao-Executivo-federal-2021-1/1-pedidos-decisoes.html)

* Pedidos por órgão:
  * Acesso Negado [CLIQUE AQUI](https://transparencia-brasil.github.io/negativas-acesso-informacao-Executivo-federal-2021-1/2-pedidos-orgaos-acesso-negado.html)


## Base de dados

* Site do e-SIC/CGU - [clique aqui](http://www.consultaesic.cgu.gov.br/busca/_layouts/15/DownloadPedidos/DownloadDados.aspx)
* Dicionário de variáveis - [clique aqui](http://www.consultaesic.cgu.gov.br/arquivosRelatorios/PedidosRespostas/Dicionario-Dados-Exportacao.txt)

#### Download da base bruta

* Os dados brutos estão disponíveis ano a ano no site do e-sic da Controladoria Geral da União. Para baixar manualmente [acesse o site do esic](http://www.consultaesic.cgu.gov.br/busca/_layouts/15/DownloadPedidos/DownloadDados.aspx), selecione ano e formato (trabalhamos com XML) e clique em download.  

##### Arquivos:

```{r fig.width=15}
library(here)
library(tibble)
library(dplyr)
library(stringr)
library(glue)
# check
"dados/raw" %>% 
  here() %>% 
  list.files(recursive = T, full.names = T) %>% 
  file.info() %>% 
  tibble(Arquivo = str_remove(rownames(.), "^.+dados\\/raw\\/")) %>%  
  transmute(
    Arquivo, 
    `Tamanho (mb)` = round(size/(1024^2),1),
    `Data do download` = ctime
  ) %>% kableExtra::kbl(format = "pipe", align = "lcl",format.args = list(decimal.mark = ","))
```

```{r eval = FALSE}
### Descrição dos arquivos XML
here(glue("dados/load/xml")) %>% 
  list.files(pattern = ".xml$", full.names = T) %>% 
  file.info() %>% 
  tibble(Arquivo = str_remove(rownames(.), "^.+dados\\/load\\/xml\\/")) %>%  
  as_tibble() %>% 
  transmute(
    Tipo = str_extract(Arquivo, "Pedidos|Recursos"),
    Ano = str_extract(Arquivo, "_\\d{4}") %>% str_remove("_"),
    Arquivo, 
    `Tamanho (mb)` = round(size/(1024^2),1)
  ) %>%
  arrange(Tipo, Ano) %>% 
  kableExtra::kbl(format = "pipe", align = "cccr", format.args = list(decimal.mark = ","))
```

#### Download da base pré-processada

##### RDS

* **PEDIDOS** - formato RDS ([link para download](https://drive.google.com/file/d/1TKnHS2YLZW6BC9ubKqvvoTG9Dg1vVyOO/view?usp=sharing))
* **RECURSOS** - formato RDS ([link para download](https://drive.google.com/file/d/17Kh-jtamT-Q-nBZExwHXQjj3L1kDgmZJ/view?usp=sharing))

##### CSV

* **PEDIDOS** - formato CSV ([link para download](https://drive.google.com/file/d/1R8_M5AVYJfS_8jYFP9NVuVfFtJQrbtlb/view?usp=sharing))
* **RECURSOS** - formato CSV ([link para download](https://drive.google.com/file/d/1ZyMi4AFHq32WayrXPc0wrsgMcv3dG7tp/view?usp=sharing))

##### Preview: pedidos 
```{r}
glimpse(readRDS(here("dados/load/rds/pedidos-cgu.rds")))
```

##### Preview: recursos
```{r}
glimpse(readRDS(here("dados/load/rds/recursos-cgu.rds")))
```

### Código

```{r echo = FALSE, eval = FALSE}
glue::glue("* [`{list.files('src')}`](`src/{list.files('src')}`)")
```

* [`1-download-funcao-crawler-esic.R`](`src/1-download-funcao-crawler-esic.R`)
* [`2-download-crawler-exec.R`](`src/2-download-crawler-exec.R`)
* [`3-pedidos-cgu-pre-processamento.R`](`src/3-pedidos-cgu-pre-processamento.R`)
* [`4-solicitantes-cgu-pre-processamento.R`](`src/4-solicitantes-cgu-pre-processamento.R`)
* [`5-pedidos-cgu-nlp.R`](`src/5-pedidos-cgu-nlp.R`)
* [`6-termos-controversos.R`](`src/6-termos-controversos.R`)
* [`download_dados_cgu.ipynb`](`src/download_dados_cgu.ipynb`)